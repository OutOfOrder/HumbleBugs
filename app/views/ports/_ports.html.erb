<% if !defined? show_game then show_game = false end %>
<table>
  <tr>
    <% if show_game %>
      <th>Game</th>
    <% end %>
    <th>Platforms</th>
    <th>State</th>
    <th>Developer</th>
  </tr>

  <% ports.each do |port| %>
    <tr>
      <% if show_game %>
        <td><%= port.game.name %></td>
      <% end %>
      <td><%= platform_list port.platforms %></td>
      <td><%= label_for Port::STATES, port.state %></td>
      <td><%= port.developer.try(:name) || port.porter.try(:name) %></td>
      <td><%= link_to 'Edit', edit_game_port_path(port.game, port) if permitted_to? :edit, port %></td>
    </tr>
  <% end %>
</table>