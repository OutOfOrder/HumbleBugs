@import "blueprint/reset";
@import "blueprint";
@import "blueprint/liquid";
@import "blueprint/fancy-type";
@import "compass/typography";
@import "compass/css3";

$bg-color: hsl(0,0%,93%);
$tab-color: adjust-lightness($bg-color,-20%);
$legend-color: adjust-lightness($bg-color, -15%);
$form-color: adjust-lightness($bg-color, -10%);
$error-color: #cc0000;

body {
  background-color: $bg-color;
}

@include blueprint-typography;

a {
  @include hover-link;
}

#container {
  @include container;

  width: 100%;
}

header {
  @include column($blueprint-grid-columns);
  border-bottom: 2px solid $tab-color;
  @include box-shadow(rgba(black, 0.5) 0 5px 3px -3px);

  #logo {
    h1 {
      $header-color: hsl(0,0%,13%);
      @include alt;
      padding: 1ex;
      font-size: 3em;
      margin-bottom: 0px;
      font-weight: bold;
      color: $header-color;
      @include text-shadow(rgba($header-color, 0.3) 4px 4px 2px);
    }
    @include column(floor($blueprint-grid-columns / 3 * 2));
  }

  #user-nav {
    div {
      padding: 1ex;
    }
    @include column(floor($blueprint-grid-columns / 3));
    @include last;
    @include background(linear-gradient($bg-color, adjust-lightness($bg-color,-20%)));
    @include border-bottom-left-radius(1em);
    @include box-shadow(rgba(black, 0.5) -1px 1px 3px 0px);
  }

  #app-nav {
    @include column($blueprint-grid-columns - 2);
    @include prepend(1);
    ul {
      @include horizontal-list;
      padding: 1ex 0 0 1ex;
      li {
        @include border-top-radius(1ex);
        background-color: $tab-color;
        @include background(linear-gradient(adjust-lightness($tab-color, 15%), $tab-color));
        padding: 0 1ex !important;
        margin-right: 1ex;
        @include box-shadow(rgba(black, 0.3) 0px 0px 2px 3px);
        &.selected {
          $tab-select-color: hsl(0,80%,50%);
          @include box-shadow(rgba($tab-select-color, 0.3) 0px 0px 2px 3px);
        }
      }
    }
  }

  #flash {
    display: none;
    .info {
      @include info;
    }
    .alert {
      @include error;
    }
  }
}

footer {
  @include column($blueprint-grid-columns);

}

#content {
  @include column($blueprint-grid-columns);
}

form {
  @include blueprint-form;
  fieldset {
    legend {
      position: absolute;
      left: 1em;
      top: -0.8em;
      background-color: $legend-color;
      @include background(linear-gradient(adjust-lightness($legend-color,15%), $legend-color));
      padding: 0 1ex;
      @include border-radius(1ex);
      @include box-shadow($legend-color 0px 0px 4px 2px);
    }
    position: relative;
    margin: 1.5em 1em 1em 1em;
    @include border-radius(1em);
    @include box-shadow(rgba(black,0.5) 0px 0px 1em);
    background-color: $form-color;
    @include background(linear-gradient(adjust-lightness($form-color,15%), $form-color));
  }
  &.login_form {
    @include column($blueprint-grid-columns / 3);
    @include prepend($blueprint-grid-columns / 3);
  }
  &.new_form {
    @include column($blueprint-grid-columns - 2);
    @include prepend(1);
  }
  div {
    &.field, &.actions {
      margin-bottom: 1ex;
    }
  }
  #error_explanation {
    width: 45em;
    @include box-shadow(0px 0px 2px 2px rgba($error-color,0.5));
    padding: 1ex;
    padding-bottom: 0;
    margin-bottom: 1em;
    h2 {
      text-align: left;
      font-weight: bold;
      padding: 1ex 1ex 1ex 1.5em;
      font-size: 1em;
      margin: -1ex;
      margin-bottom: 0;
      background-color: $error-color;
      @include background(linear-gradient($error-color, adjust-lightness($error-color, 30%) 90%));
      color: #fff;
    }
    ul {
      list-style: square;
      margin-bottom: 1ex;
      li {
        font-size: 12px;
      }
    }
  }
  .field_with_errors {
    label {
      font-style: italic;
      color: $error-color;
    }
    input,textarea {
      @include box-shadow(0px 0px 2px 2px rgba($error-color,0.5));
    }
  }
}
form.inline {
  @include blueprint-inline-form;
}